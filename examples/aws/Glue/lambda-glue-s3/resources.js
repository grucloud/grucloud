// Generated by 'gc gencode'
const {} = require("rubico");
const {} = require("rubico/x");

exports.createResources = () => [
  {
    type: "Job",
    group: "Glue",
    properties: ({}) => ({
      Command: {
        Name: "glueetl",
        PythonVersion: "2",
        ScriptLocation: "s3://gc-glue-job-bucket/glue-python-assets/script.py",
      },
      ExecutionProperty: {
        MaxConcurrentRuns: 1,
      },
      GlueVersion: "0.9",
      MaxRetries: 0,
      Name: "cdk-glue-etl-job",
      Timeout: 2880,
    }),
    dependencies: ({}) => ({
      role: "CdkLambdaGlueS3Stack-GlueJobRoleD29FD79E-1KWHI77IFZMTG",
    }),
  },
  {
    type: "Role",
    group: "IAM",
    properties: ({ config }) => ({
      RoleName:
        "CdkLambdaGlueS3Stack-CustomCDKBucketDeployment8693-7R743TFLOA71",
      AssumeRolePolicyDocument: {
        Version: "2012-10-17",
        Statement: [
          {
            Effect: "Allow",
            Principal: {
              Service: "lambda.amazonaws.com",
            },
            Action: "sts:AssumeRole",
          },
        ],
      },
      Policies: [
        {
          PolicyDocument: {
            Version: "2012-10-17",
            Statement: [
              {
                Action: ["s3:GetObject*", "s3:GetBucket*", "s3:List*"],
                Resource: [
                  `arn:aws:s3:::cdk-hnb659fds-assets-${config.accountId()}-${
                    config.region
                  }`,
                  `arn:aws:s3:::cdk-hnb659fds-assets-${config.accountId()}-${
                    config.region
                  }/*`,
                ],
                Effect: "Allow",
              },
              {
                Action: [
                  "s3:GetObject*",
                  "s3:GetBucket*",
                  "s3:List*",
                  "s3:DeleteObject*",
                  "s3:PutObject",
                  "s3:PutObjectLegalHold",
                  "s3:PutObjectRetention",
                  "s3:PutObjectTagging",
                  "s3:PutObjectVersionTagging",
                  "s3:Abort*",
                ],
                Resource: [
                  "arn:aws:s3:::gc-glue-job-bucket",
                  "arn:aws:s3:::gc-glue-job-bucket/*",
                ],
                Effect: "Allow",
              },
            ],
          },
          PolicyName:
            "CustomCDKBucketDeployment8693BB64968944B69AAFB0CC9EB8756CServiceRoleDefaultPolicy88902FDF",
        },
      ],
      AttachedPolicies: [
        {
          PolicyArn:
            "arn:aws:iam::aws:policy/service-role/AWSLambdaBasicExecutionRole",
          PolicyName: "AWSLambdaBasicExecutionRole",
        },
      ],
    }),
  },
  {
    type: "Role",
    group: "IAM",
    properties: ({}) => ({
      RoleName:
        "CdkLambdaGlueS3Stack-CustomS3AutoDeleteObjectsCust-1X1B36HWFF31B",
      AssumeRolePolicyDocument: {
        Version: "2012-10-17",
        Statement: [
          {
            Effect: "Allow",
            Principal: {
              Service: "lambda.amazonaws.com",
            },
            Action: "sts:AssumeRole",
          },
        ],
      },
      AttachedPolicies: [
        {
          PolicyArn:
            "arn:aws:iam::aws:policy/service-role/AWSLambdaBasicExecutionRole",
          PolicyName: "AWSLambdaBasicExecutionRole",
        },
      ],
    }),
  },
  {
    type: "Role",
    group: "IAM",
    properties: ({ config }) => ({
      RoleName:
        "CdkLambdaGlueS3Stack-GlueHandlerServiceRole714E829-3HKYP8HE9PJZ",
      AssumeRolePolicyDocument: {
        Version: "2012-10-17",
        Statement: [
          {
            Effect: "Allow",
            Principal: {
              Service: "lambda.amazonaws.com",
            },
            Action: "sts:AssumeRole",
          },
        ],
      },
      Policies: [
        {
          PolicyDocument: {
            Version: "2012-10-17",
            Statement: [
              {
                Action: "glue:StartJobRun",
                Resource: `arn:aws:glue:${
                  config.region
                }:${config.accountId()}:job/cdk-glue-etl-job`,
                Effect: "Allow",
              },
            ],
          },
          PolicyName: "gluePolicyPermission9275A368",
        },
      ],
      AttachedPolicies: [
        {
          PolicyArn:
            "arn:aws:iam::aws:policy/service-role/AWSLambdaBasicExecutionRole",
          PolicyName: "AWSLambdaBasicExecutionRole",
        },
      ],
    }),
  },
  {
    type: "Role",
    group: "IAM",
    properties: ({}) => ({
      RoleName: "CdkLambdaGlueS3Stack-GlueJobRoleD29FD79E-1KWHI77IFZMTG",
      AssumeRolePolicyDocument: {
        Version: "2012-10-17",
        Statement: [
          {
            Effect: "Allow",
            Principal: {
              Service: "glue.amazonaws.com",
            },
            Action: "sts:AssumeRole",
          },
        ],
      },
      Policies: [
        {
          PolicyDocument: {
            Version: "2012-10-17",
            Statement: [
              {
                Action: [
                  "s3:GetObject*",
                  "s3:GetBucket*",
                  "s3:List*",
                  "s3:DeleteObject*",
                  "s3:PutObject",
                  "s3:PutObjectLegalHold",
                  "s3:PutObjectRetention",
                  "s3:PutObjectTagging",
                  "s3:PutObjectVersionTagging",
                  "s3:Abort*",
                ],
                Resource: [
                  "arn:aws:s3:::gc-glue-job-bucket",
                  "arn:aws:s3:::gc-glue-job-bucket/*",
                ],
                Effect: "Allow",
              },
            ],
          },
          PolicyName: "GlueJobRoleDefaultPolicy1DC1C7DA",
        },
      ],
      AttachedPolicies: [
        {
          PolicyArn: "arn:aws:iam::aws:policy/service-role/AWSGlueServiceRole",
          PolicyName: "AWSGlueServiceRole",
        },
      ],
    }),
  },
  {
    type: "Function",
    group: "Lambda",
    properties: ({}) => ({
      Configuration: {
        FunctionName:
          "CdkLambdaGlueS3Stack-CustomCDKBucketDeployment8693-mhVJN0MvgnZ0",
        Handler: "index.handler",
        Runtime: "python3.7",
        Timeout: 900,
      },
    }),
    dependencies: ({}) => ({
      role: "CdkLambdaGlueS3Stack-CustomCDKBucketDeployment8693-7R743TFLOA71",
    }),
  },
  {
    type: "Function",
    group: "Lambda",
    properties: ({}) => ({
      Configuration: {
        Description:
          "Lambda function for auto-deleting objects in gc-glue-job-bucket S3 bucket.",
        FunctionName:
          "CdkLambdaGlueS3Stack-CustomS3AutoDeleteObjectsCust-wGB7tRJC8sgA",
        Handler: "__entrypoint__.handler",
        Runtime: "nodejs12.x",
        Timeout: 900,
      },
    }),
    dependencies: ({}) => ({
      role: "CdkLambdaGlueS3Stack-CustomS3AutoDeleteObjectsCust-1X1B36HWFF31B",
    }),
  },
  {
    type: "Function",
    group: "Lambda",
    properties: ({}) => ({
      Configuration: {
        Environment: {
          Variables: {
            JOB_NAME: "cdk-glue-etl-job",
          },
        },
        FunctionName: "MyGlueHandler",
        Handler: "glue.handler",
        Runtime: "python3.7",
      },
    }),
    dependencies: ({}) => ({
      role: "CdkLambdaGlueS3Stack-GlueHandlerServiceRole714E829-3HKYP8HE9PJZ",
    }),
  },
  {
    type: "Bucket",
    group: "S3",
    properties: ({ config }) => ({
      Name: "gc-glue-job-bucket",
      Policy: {
        Version: "2012-10-17",
        Statement: [
          {
            Effect: "Allow",
            Principal: {
              AWS: `arn:aws:iam::${config.accountId()}:role/CdkLambdaGlueS3Stack-CustomS3AutoDeleteObjectsCust-1X1B36HWFF31B`,
            },
            Action: ["s3:GetBucket*", "s3:List*", "s3:DeleteObject*"],
            Resource: [
              "arn:aws:s3:::gc-glue-job-bucket",
              "arn:aws:s3:::gc-glue-job-bucket/*",
            ],
          },
        ],
      },
    }),
  },
];
